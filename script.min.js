import*as e from"./modules/algebra.js";import*as a from"./modules/arithmetic.js";import*as r from"./modules/calculus.js";import*as t from"./modules/discreteMathematics.js";import*as s from"./modules/linearAlgebra.js";import*as i from"./modules/trigonometry.js";export let questionArea=document.getElementById("question-area");let d=document.getElementById("gen-type"),c=document.getElementById("genQ"),n=document.getElementById("answer-box"),o=document.getElementById("answer-results"),l=document.getElementById("check-answer");function b(){let e=n.value.trim().toLowerCase(),a=!1,r=e=>String(e).replace(/\s+/g,"").replace(/\^1/g,"").replace(/x(?!\d)/g,"x1").replace(/(\D)1+/g,"$1").trim().toLowerCase(),t=e=>{try{return a=Function('"use strict"; return ('+e.replace(/(sin|cos|tan|log)\(/g,"Math.$1(")+")")(),parseFloat(a).toString()}catch(a){return r(e)}var a},s=d.value;if(["arithmetic_sum","geometric_sum","convergence","nth_term"].includes(s))switch(s){case"convergence":let s=e.replace(/[^a-z]/g,""),i=correctAnswer.correct.toLowerCase().replace(/[^a-z]/g,"");a="converges"==i?"converge"==s||"converges"==s:"diverges"==i?"diverge"==s||"diverges"==s:s==i;break;case"geometric_sum":let d=parseFloat(e),c=parseFloat(correctAnswer.correct);if(isNaN(d)){let s=t(e);a=[correctAnswer.correct,correctAnswer.alternate].filter((e=>void 0!==e)).some((e=>t(e)==s||r(e)==s))}else a=Math.abs(d-c)<.01;break;default:let n=parseFloat(e),o=parseFloat(correctAnswer.correct);a=!isNaN(n)&&n==o}else if(["deri","mtrx","vctr","root","inte","sin","cos","tan","cosec","sec","cot","log"].includes(s)){let s=t(e);a=[correctAnswer.correct,correctAnswer.alternate].filter((e=>void 0!==e)).some((e=>t(e)==s||r(e)==s))}else{let r=parseFloat(e),t=parseFloat(correctAnswer.correct);a=!isNaN(r)&&r==t}o.innerHTML=a?`Correct! The answer is <span class="answer">${correctAnswer.correct}</span>.`:`Incorrect. The correct answer is <span class="answer">${correctAnswer.correct}</span>.`}window.correctAnswer={},n.addEventListener("keyup",(function(e){e.shiftKey&&"Enter"==e.key&&(b(),n.value="",n.focus())})),c.addEventListener("click",(function(){switch(d.value){case"add":a.generateAddition(),l.disabled=!1,n.disabled=!1;break;case"subtrt":a.generateSubtraction(),l.disabled=!1,n.disabled=!1;break;case"mult":a.generateMultiplication(),l.disabled=!1,n.disabled=!1;break;case"divid":a.generateDivision(),l.disabled=!1,n.disabled=!1;break;case"root":e.generateRoot(),l.disabled=!1,n.disabled=!1;break;case"deri":r.generateDerivative(),l.disabled=!1,n.disabled=!1;break;case"inte":r.generateIntegral(),l.disabled=!1,n.disabled=!1;break;case"mtrx":s.generateMatrix(),l.disabled=!1,n.disabled=!1;break;case"vctr":s.generateVector(),l.disabled=!1,n.disabled=!1;break;case"sin":i.generateSin(),l.disabled=!1,n.disabled=!1;break;case"cos":i.generateCosine(),l.disabled=!1,n.disabled=!1;break;case"tan":i.generateTangent(),l.disabled=!1,n.disabled=!1;break;case"cosec":i.generateCosecant(),l.disabled=!1,n.disabled=!1;break;case"sec":i.generateSecant(),l.disabled=!1,n.disabled=!1;break;case"cot":i.generateCotangent(),l.disabled=!1,n.disabled=!1;break;case"log":e.generateLogarithm(),l.disabled=!1,n.disabled=!1;break;case"exp":e.generateExponent(),l.disabled=!1,n.disabled=!1;break;case"fact":e.generateFactorial(),l.disabled=!1,n.disabled=!1;break;case"perm":t.generatePermutation(),l.disabled=!1,n.disabled=!1;break;case"comb":t.generateCombination(),l.disabled=!1,n.disabled=!1;break;case"prob":t.generateProbability(),l.disabled=!1,n.disabled=!1;break;case"ser":e.generateSeries(),l.disabled=!1,n.disabled=!1;break;case"lim":r.generateLimit(),l.disabled=!1,n.disabled=!1;break;case"relRates":r.generateRelatedRates(),l.disabled=!1,n.disabled=!1;break;default:questionArea.innerHTML='Please select a type of question to generate before hitting the "Generate Question" button'}})),l.addEventListener("click",b);