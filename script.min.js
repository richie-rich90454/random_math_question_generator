let quotesArray=[],authorsArray=[],questionArea=document.getElementById("question-area"),questionType=document.getElementById("gen-type"),generateQuestionButton=document.getElementById("genQ"),userAnswer=document.getElementById("answer-box"),answerResults=document.getElementById("answer-results"),checkAnswerButton=document.getElementById("check-answer"),correctAnswer=0;function generateQuestion(){switch(questionType.value){case"add":generateAddition(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"subtrt":generateSubtraction(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"mult":generateMultiplication(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"divid":generateDivision(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"root":generateRoot(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"deri":generateDerivative(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"inte":generateIntegral(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"mtrx":generateMatrix(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"vctr":generateVector(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"sin":generateSin(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"cos":generateCosine(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"tan":generateTangent(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"cosec":generateCosecant(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"sec":generateSecant(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"cot":generateCotangent(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"log":generateLogarithm(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"exp":generateExponent(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"fact":generateFactorial(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"perm":generatePermutation(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"comb":generateCombination(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"prob":generateProbability(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"ser":generateSeries(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"lim":generateLimit(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;case"relRates":generateRelatedRates(),checkAnswerButton.disabled=!1,userAnswer.disabled=!1;break;default:questionArea.innerHTML='Please select a type of question to generate before hitting the "Generate Question" button'}MathJax.typeset()}function generateAddition(){let e=parseFloat((1500*Math.random()-1e3).toFixed(3)),t=parseFloat((1500*Math.random()).toFixed(3));questionArea.innerHTML=`$${e}+${t}=$`,correctAnswer={t:(e+t).toFixed(3)}}function generateSubtraction(){let e=parseFloat((1500*Math.random()-1e3).toFixed(3)),t=parseFloat((1500*Math.random()).toFixed(3));questionArea.innerHTML=`$${e}-${t}=$`,correctAnswer={t:(e-t).toFixed(3)}}function generateMultiplication(){let e=parseFloat((1500*Math.random()-1e3).toFixed(2)),t=parseFloat((1500*Math.random()).toFixed(2));questionArea.innerHTML=`$${e} \\times ${t}=$<br>Round your answer to two decimal places`;let a=e*t;correctAnswer={t:(Math.round(100*a)/100).toFixed(2),alternate:a.toFixed(5)}}function generateDivision(){let e=parseFloat((1500*Math.random()-1e3).toFixed(2)),t=parseFloat((1500*Math.random()).toFixed(2));questionArea.innerHTML=`$${e} \\div ${t}=$<br>Round your answer to two decimal places`;let a=e/t;correctAnswer={t:(Math.round(100*a)/100).toFixed(2),alternate:a.toFixed(5)}}function generateRoot(){questionArea.innerHTML="";let e=Math.floor(4*Math.random())+2,t=Math.floor(10*Math.random())+1,a=Math.pow(t,e),r="";r=2==e?`\\[ \\sqrt{${a}}=? \\]`:`\\[ \\sqrt[${e}]{${a}}=? \\]`;let n=t.toString(),c=document.createElement("div");c.innerHTML=r,questionArea.appendChild(c),MathJax.typesetPromise([c]),correctAnswer={t:n,alternate:n}}function generateDerivative(){questionArea.innerHTML="";let e,t,a,r,n=[{o:"\\sin(x)",i:"\\cos(x)",l:"cos(x)"},{o:"\\cos(x)",i:"-\\sin(x)",l:"-sin(x)"},{o:"\\tan(x)",i:"\\sec^{2}(x)",l:"sec^2(x)"},{o:"\\csc(x)",i:"-\\csc(x)\\cot(x)",l:"-csc(x)cot(x)"},{o:"\\sec(x)",i:"\\sec(x)\\tan(x)",l:"sec(x)tan(x)"},{o:"\\cot(x)",i:"-\\csc^{2}(x)",l:"-csc^2(x)"}],c=[{o:"e^{x}",i:"e^{x}",l:"e^x"},{o:"2^{x}",i:"2^{x}\\ln(2)",l:"2^x*ln(2)"}],s=[{o:"\\ln(x)",i:"\\frac{1}{x}",l:"1/x"},{o:"\\log_{2}(x)",i:"\\frac{1}{x\\ln(2)}",l:"1/(x*ln(2))"}],o=["polynomial","trigonometric","exponential","logarithmic","product","quotient","chain","implicit","higherOrder","motion"],i=e=>e.replace(/\\/g,"").replace(/{/g,"").replace(/}/g,"").replace(/cdot/g,"*").replace(/frac\(([^)]+)\)\(([^)]+)\)/g,"($1)/($2)").replace(/frac{([^}]+)}{([^}]+)}/g,"($1)/($2)");switch(o[Math.floor(Math.random()*o.length)]){case"polynomial":{let n=Math.floor(4*Math.random())+2,c=new Set;for(;c.size<n;)c.add(Math.floor(11*Math.random()));c=Array.from(c).sort(((e,t)=>t-e));let s=[];for(let e of c){let t=0==e?Math.floor(100*Math.random())+1:1==e?Math.floor(20*Math.random())+1:Math.floor(30*Math.random())+1;s.push(t)}let o=[],i=[];for(let e=0;e<c.length;e++){let t=0==c[e]?`${s[e]}`:1==c[e]?`${s[e]}x`:`${s[e]}x^{${c[e]}}`,a=0==c[e]?`${s[e]}`:1==c[e]?`${s[e]}x`:`${s[e]}x^${c[e]}`;o.push(t),i.push(a)}e=`(${o.join("+")})`;let l=[],h=[];for(let e=0;e<c.length;e++){if(0==c[e])continue;let t=s[e]*c[e],a=c[e]-1,r=0==a?`${t}`:1==a?`${t}x`:`${t}x^{${a}}`,n=0==a?`${t}`:1==a?`${t}x`:`${t}x^${a}`;l.push(r),h.push(n)}t=l.join("+")||"0",a=h.join("+")||"0",r=`\\[ \\frac{d}{dx} ${e}=? \\]`;break}case"trigonometric":{let c=n[Math.floor(Math.random()*n.length)],s=Math.floor(5*Math.random())+1;e=`${s} ${c.o}`,t=`${s} \\cdot ${c.i}`,a=`${s}*${c.l}`,r=`\\[ \\frac{d}{dx} ${e}=? \\]`;break}case"exponential":{let n=c[Math.floor(Math.random()*c.length)],s=Math.floor(5*Math.random())+1;e=`${s} ${n.o}`,t=`${s} \\cdot ${n.i}`,a=`${s}*${n.l}`,r=`\\[ \\frac{d}{dx} ${e}=? \\]`;break}case"logarithmic":{let n=s[Math.floor(Math.random()*s.length)];e=n.o,t=n.i,a=n.l,r=`\\[ \\frac{d}{dx} ${e}=? \\]`;break}case"product":{let c=Math.floor(5*Math.random())+1,s=`${c}x`,o=n[Math.floor(Math.random()*n.length)];e=`(${s}) \\cdot (${o.o})`,t=`${c} \\cdot ${o.o}+(${s}) \\cdot (${o.i})`,a=`${c}*${i(o.o)}+(${s})*${o.l}`,r=`\\[ \\frac{d}{dx} ${e}=? \\]`;break}case"quotient":{let c=Math.floor(5*Math.random())+1,s=Math.floor(6*Math.random()),o=n[Math.floor(Math.random()*n.length)],l=`${c}x+${s}`;e=`\\frac{${l}}{${o.o}}`,t=`\\frac{${c} \\cdot ${o.o}-(${l}) \\cdot ${o.i}}{(${o.o})^{2}}`,a=`(${c}*${i(o.o)}-(${l})*${o.l})/(${i(o.o)})^2`,r=`\\[ \\frac{d}{dx} ${e}=? \\]`;break}case"chain":{let c=Math.floor(3*Math.random()),s=Math.floor(3*Math.random())+1,o=Math.floor(3*Math.random()),i=`${s}x+${o}`,l=`${s}x+${o}`;if(0==c){let r=n[Math.floor(2*Math.random())];e=`${r.o.replace("x",i)}`,t=`${r.i.replace("x",i)} \\cdot ${s}`,a=`${r.l.replace("x",l)}*${s}`}else if(1==c)e=`e^{${i}}`,t=`e^{${i}} \\cdot ${s}`,a=`e^(${l})*${s}`;else{let r=Math.floor(3*Math.random())+2;e=`(${i})^{${r}}`,t=`${r} (${i})^{${r-1}} \\cdot ${s}`,a=`${r}*(${l})^${r-1}*${s}`}r=`\\[ \\frac{d}{dx} ${e}=? \\]`;break}case"implicit":{let n=Math.floor(3*Math.random())+1,c=Math.floor(3*Math.random())+1;e=`${n}x^{2}+${c}y^{2}=1`,t=`-\\frac{${n}x}{${c}y}`,a=`-(${n}x)/(${c}y)`,r=`\\[ \\text{Find } \\frac{dy}{dx} \\text{ given } ${e} \\]`;break}case"higherOrder":{let n=Math.floor(10*Math.random())+1,c=Math.floor(4*Math.random())+2;e=`${n}x^{${c}}`;let s=Math.floor(2*Math.random())+2,o=n,i=c;for(let e=0;e<s;e++)o*=i,i--;t=i<0?"0":0==i?`${o}`:1==i?`${o}x`:`${o}x^{${i}}`,a=i<0?"0":0==i?`${o}`:1==i?`${o}x`:`${o}x^${i}`,r=`\\[ \\frac{d^{${s}}}{dx^{${s}}} ${e}=? \\]`;break}case"motion":{let n=Math.floor(5*Math.random())+1,c=Math.floor(5*Math.random())+1;e=`${n}t^{2}+${c}t`,t=`${2*n}t+${c}`,a=`${2*n}t+${c}`,r=`\\[ \\text{If position } s(t)=${e}, \\text{ find velocity } v(t)=? \\]`;break}}let l=document.createElement("div");l.innerHTML=r,questionArea.appendChild(l),MathJax.typesetPromise([l]),correctAnswer={t:a.replace(/\s+/g,"").toLowerCase()}}function getOrdinal(e){let t=["th","st","nd","rd"],a=e%100;return t[(a-20)%10]||t[a]||t[0]}function generateIntegral(){questionArea.innerHTML="";let e,t,a,r,n=["polynomial","trigonometric","exponential","logarithmic","substitution","definite","initialValue","area","motion"];switch(n[Math.floor(Math.random()*n.length)]){case"polynomial":{let n=Math.floor(4*Math.random())+2,c=new Set;for(;c.size<n;)c.add(Math.floor(11*Math.random()));c=Array.from(c).sort(((e,t)=>t-e));let s=[];for(let e of c)s.push(0==e?Math.floor(100*Math.random())+1:1==e?Math.floor(20*Math.random())+1:Math.floor(30*Math.random())+1);let o=[],i=[];for(let e=0;e<c.length;e++){let t=0==c[e]?`${s[e]}`:1==c[e]?`${s[e]}x`:`${s[e]}x^{${c[e]}}`,a=t.replace(/[{}]/g,"");o.push(t),i.push(a)}e=`(${o.join("+")})`;let l=[],h=[];for(let e=0;e<c.length;e++){let t=c[e]+1,a=s[e]/t,r=`${a.toFixed(2)}x^{${t}}`,n=`${a.toFixed(2)}x^${t}`;l.push(r),h.push(n)}l.push("C"),h.push("C"),t=l.join("+"),a=h.join("+"),r=`\\[ \\int ${e} \\,dx=? \\]`;break}case"trigonometric":{let r=[{o:"\\sin(ax)",h:"-\\frac{1}{a}\\cos(ax)",$:"-1/a cos(ax)"},{o:"\\cos(ax)",h:"\\frac{1}{a}\\sin(ax)",$:"1/a sin(ax)"},{o:"\\sec^{2}(ax)",h:"\\frac{1}{a}\\tan(ax)",$:"1/a tan(ax)"}],n=r[Math.floor(Math.random()*r.length)],c=Math.floor(3*Math.random())+1,s=Math.floor(4*Math.random())+1;e=`${s}${n.o.replace("a",c)}`,t=`${s}${n.h.replace(/a/g,c)}+C`,a=`${(s/c).toFixed(2)}${n.$.replace("a",c).replace("1/a","1/"+c)}+C`.replace(/(\.00|0+)$/,"");break}case"exponential":{let t=Math.random()<.5?"e":Math.floor(3*Math.random())+2,n=Math.floor(3*Math.random())+1,c=Math.floor(4*Math.random())+1;"e"==t?(e=`${c}e^{${n}x}`,a=`${(c/n).toFixed(2)}e^(${n}x)+C`):(e=`${c}${t}^{x}`,a=`${(c/Math.log(t)).toFixed(2)}${t}^x+C`),r=`\\[ \\int ${e} \\,dx=? \\]`;break}case"logarithmic":{let t=Math.floor(5*Math.random())+1;e=`${t}/x`,a=`${t}ln|x|+C`,r=`\\[ \\int ${e} \\,dx=? \\]`;break}case"substitution":{let t=Math.floor(3*Math.random())+1,n=Math.floor(5*Math.random()),c=Math.floor(3*Math.random())+2,s=Math.floor(4*Math.random())+1;e=`${s}(${t}x+${n})^{${c}}`;let o=c+1;a=`${(s/(t*o)).toFixed(2)}(${t}x+${n})^${o}+C`.replace(/\.00/g,""),r=`\\[ \\int ${e} \\,dx=? \\]`;break}case"definite":{let t=Array.from({length:3},(()=>Math.floor(4*Math.random()))),n=t.map((()=>Math.floor(5*Math.random())+1)),[c,s]=[1,Math.floor(5*Math.random())+2];e=n.map(((e,a)=>`${e}x^${t[a]}`)).join("+");let o=n.map(((e,a)=>e/(t[a]+1))).reduce(((e,t)=>e+t),0);a=((s**(t[0]+1)-c**(t[0]+1))*o).toFixed(2),r=`\\[ \\int_{${c}}^{${s}} ${e} \\,dx=? \\]`;break}case"initialValue":{let t=Math.floor(5*Math.random())+1,n=Math.floor(3*Math.random())+1,c=Math.floor(3*Math.random())+1,s=Math.floor(20*Math.random())+5;e=`${t}x^${n}`;let o=s-t/(n+1)*c**(n+1);a=`${(t/(n+1)).toFixed(2)}x^${n+1}+${o.toFixed(2)}`,r=`\\[ \\text{Find } f(x) \\text{ where } f'(${c})=${s} \\text{ and } f'(x)=${e} \\]`;break}case"area":{let e=["x^2","sin(x)","sqrt(x)","2^x"],t=e[Math.floor(Math.random()*e.length)],[n,c]=[0,Math.floor(4*Math.random())+1];a=`∫${n}^${c} ${t} dx`,r=`\\[ \\text{Set up the integral for the area under } ${t} \\text{ from } ${n} \\text{ to } ${c} \\]`;break}case"motion":{let t=Math.floor(4*Math.random())+1,n=Math.random()<.5?"velocity":"acceleration";"velocity"==n?(e=`${t}t^2`,a=`${(t/3).toFixed(2)}t^3+C`):(e=`${t}t`,a=`${(t/2).toFixed(2)}t^2+C`),r=`\\[ \\text{Find position function from } ${n} \\ a(t)=${e} \\]`;break}}let c=document.createElement("div");c.innerHTML=r||`\\[ \\int ${e} \\,dx=? \\]`,questionArea.appendChild(c),MathJax.typesetPromise([c]),correctAnswer={t:a.replace(/\s+/g,"").replace(/\^{/g,"^").replace(/}/g,"").replace(/{/g,"").toLowerCase()}}function generateVector(){questionArea.innerHTML="";let e=["magnitude","direction","unit","dot","angle","projection","parametric","polar_convert","cartesian_convert","polar_graph","motion","de_moivre","add","subtract","parametric_to_cartesian"],t=e[Math.floor(Math.random()*e.length)],a=()=>{let e,t;do{e=10*Math.random()-5,t=10*Math.random()-5}while(Math.abs(e)<.1&&Math.abs(t)<.1);return{x:e,y:t}};switch(t){case"magnitude":{let{x:e,y:t}=a(),r=Math.sqrt(e**2+t**2).toFixed(2);questionArea.innerHTML=`Find the magnitude of \\(\\langle ${e.toFixed(1)}, ${t.toFixed(1)} \\rangle\\).`,correctAnswer={t:r,alternate:r};break}case"direction":{let{x:e,y:t}=a(),r=(180*Math.atan2(t,e)/Math.PI).toFixed(1);questionArea.innerHTML=`Find the direction angle (in degrees) of \\(\\langle ${e.toFixed(1)}, ${t.toFixed(1)} \\rangle\\).`,correctAnswer={t:r,alternate:r};break}case"unit":{let{x:e,y:t}=a(),r=Math.sqrt(e**2+t**2),n=(e/r).toFixed(2),c=(t/r).toFixed(2);questionArea.innerHTML=`Find the unit vector in the direction of \\(\\langle ${e.toFixed(1)}, ${t.toFixed(1)} \\rangle\\).`,correctAnswer={t:`<${n}, ${c}>`,alternate:`\\langle ${n}, ${c} \\rangle`};break}case"dot":{let e=a(),t=a(),r=(e.x*t.x+e.y*t.y).toFixed(2);questionArea.innerHTML=`Calculate \\(\\langle ${e.x.toFixed(1)}, ${e.y.toFixed(1)} \\rangle \\cdot \\langle ${t.x.toFixed(1)}, ${t.y.toFixed(1)} \\rangle\\).`,correctAnswer={t:r,alternate:r};break}case"angle":{let e=a(),t=a(),r=e.x*t.x+e.y*t.y,n=Math.sqrt(e.x**2+e.y**2),c=Math.sqrt(t.x**2+t.y**2),s=(180*Math.acos(r/(n*c))/Math.PI).toFixed(1);questionArea.innerHTML=`Find the angle (in degrees) between \\(\\langle ${e.x.toFixed(1)}, ${e.y.toFixed(1)} \\rangle\\) and \\(\\langle ${t.x.toFixed(1)}, ${t.y.toFixed(1)} \\rangle\\).`,correctAnswer={t:s,alternate:s};break}case"projection":{let e=a(),t=a(),r=e.x*t.x+e.y*t.y,n=t.x**2+t.y**2,c=(r/n*t.x).toFixed(2),s=(r/n*t.y).toFixed(2);questionArea.innerHTML=`Find the projection of \\(\\langle ${e.x.toFixed(1)}, ${e.y.toFixed(1)} \\rangle\\) onto \\(\\langle ${t.x.toFixed(1)}, ${t.y.toFixed(1)} \\rangle\\).`,correctAnswer={t:`<${c}, ${s}>`,alternate:`\\langle ${c}, ${s} \\rangle`};break}case"parametric":{let e=(10*Math.random()-5).toFixed(1),t=(10*Math.random()-5).toFixed(1),r=a();questionArea.innerHTML=`Write the parametric equations for the line that passes through \\((${e}, ${t})\\) and has direction vector \\(\\langle ${r.x.toFixed(1)}, ${r.y.toFixed(1)} \\rangle\\).`,correctAnswer={t:`x=${e}+${r.x.toFixed(1)}t, y=${t}+${r.y.toFixed(1)}t`,alternate:`x=${e}+${r.x.toFixed(1)}t, y=${t}+${r.y.toFixed(1)}t`};break}case"polar_convert":{let e=(10*Math.random()).toFixed(1),t=(360*Math.random()-180).toFixed(0),a=parseFloat(e)*Math.cos(parseFloat(t)*Math.PI/180).toFixed(2),r=parseFloat(e)*Math.sin(parseFloat(t)*Math.PI/180).toFixed(2);questionArea.innerHTML=`Convert the polar coordinate \\((${e}, ${t}^{\\circ})\\) to Cartesian coordinates.`,correctAnswer={t:`(${a}, ${r})`,alternate:`(${a}, ${r})`};break}case"cartesian_convert":{let{x:e,y:t}=a(),r=Math.sqrt(e**2+t**2).toFixed(2),n=(180*Math.atan2(t,e)/Math.PI).toFixed(1);questionArea.innerHTML=`Convert the Cartesian coordinate \\((${e.toFixed(1)}, ${t.toFixed(1)})\\) to polar coordinates. Answer with (r, degrees), no need to add deg.`,correctAnswer={t:`(${r}, ${n})`,alternate:`(${r}, ${n}^{\\circ})`};break}case"polar_graph":{let e=(4*Math.random()+1).toFixed(1);if(Math.random()<.5){questionArea.innerHTML=`Describe the graph of the polar equation \\(r=${e}\\sin\\theta\\). Use the format " A circle with center at (x, y) and radius (radius) " Use two decimal places.`;let t=(e/2).toFixed(2);correctAnswer={t:`A circle with center at (0, ${t}) and radius ${t}`,alternate:`Circle: center (0, ${t}), radius ${t}`}}else{questionArea.innerHTML=`Describe the graph of the polar equation \\(r=${e}\\cos\\theta\\). Use the format " A circle with center at (x, y) and radius (radius) "  Use two decimal places.`;let t=(e/2).toFixed(2);correctAnswer={t:`A circle with center at (${t}, 0) and radius ${t}`,alternate:`Circle: center (${t}, 0), radius ${t}`}}break}case"motion":{let e=(10*Math.random()-5).toFixed(1),t=(10*Math.random()-5).toFixed(1),r=a();questionArea.innerHTML=`A particle starts at \\((${e}, ${t})\\) and moves with letant velocity \\(\\langle ${r.x.toFixed(1)}, ${r.y.toFixed(1)} \\rangle\\). Write the position vector as a function of time \\(t\\).`,correctAnswer={t:`<${e}+${r.x.toFixed(1)}t, ${t}+${r.y.toFixed(1)}t>`,alternate:`\\langle ${e}+${r.x.toFixed(1)}t, ${t}+${r.y.toFixed(1)}t \\rangle`};break}case"de_moivre":{let e=(5*Math.random()+1).toFixed(1),t=Math.floor(360*Math.random()),a=Math.floor(3*Math.random()+2),r=(e**a).toFixed(2),n=t*a%360;questionArea.innerHTML=`Compute \\((${e}(\\cos ${t}^{\\circ}+i\\sin ${t}^{\\circ}))^{${a}}\\) using De Moivre"s Theorem. Answer with degrees (no need to add deg).`,correctAnswer={t:`${r} cis ${n}`,alternate:`${r}(\\cos ${n}^{\\circ}+i\\sin ${n}^{\\circ})`};break}case"add":{let e=a(),t=a(),r=(e.x+t.x).toFixed(2),n=(e.y+t.y).toFixed(2);questionArea.innerHTML=`Find the sum of the vectors \\(\\langle ${e.x.toFixed(1)}, ${e.y.toFixed(1)} \\rangle\\) and \\(\\langle ${t.x.toFixed(1)}, ${t.y.toFixed(1)} \\rangle\\).`,correctAnswer={t:`<${r}, ${n}>`,alternate:`\\langle ${r}, ${n} \\rangle`};break}case"subtract":{let e=a(),t=a(),r=(e.x-t.x).toFixed(2),n=(e.y-t.y).toFixed(2);questionArea.innerHTML=`Subtract \\(\\langle ${t.x.toFixed(1)}, ${t.y.toFixed(1)} \\rangle\\) from \\(\\langle ${e.x.toFixed(1)}, ${e.y.toFixed(1)} \\rangle\\).`,correctAnswer={t:`<${r}, ${n}>`,alternate:`\\langle ${r}, ${n} \\rangle`};break}case"parametric_to_cartesian":{let e=(10*Math.random()-5).toFixed(1),t=(10*Math.random()-5).toFixed(1),r=(()=>{let e;do{e=a()}while(Math.abs(e.x)<.1);return e})(),n=(r.y/r.x).toFixed(2);questionArea.innerHTML=`The line is given by the parametric equations \\(x=${e}+${r.x.toFixed(1)}t\\) and \\(y=${t}+${r.y.toFixed(1)}t\\). Convert these into a single Cartesian equation.`;let c=(t-n*e).toFixed(2);correctAnswer={t:`y=${n}x+${c}`,alternate:`y=${n}(x-${e})+${t}`};break}default:questionArea.innerHTML="Unknown question type."}MathJax.typeset()}function generateLogarithm(){questionArea.innerHTML="";let e=["basic","change_base","equation","properties","exponential_form"],t=e[Math.floor(Math.random()*e.length)],a=Math.floor(4*Math.random())+2,r=Math.pow(a,Math.floor(4*Math.random())+1),n=Math.floor(3*Math.random())+2;switch(t){case"basic":{let e=(Math.log(r)/Math.log(a)).toFixed(2);questionArea.innerHTML=`Evaluate: \\( \\log_{${a}} ${r} \\)`,correctAnswer={t:e,alternate:`\\log_{${a}} ${r}=${e}`};break}case"change_base":{let e=(Math.log(r)/Math.log(n)/(Math.log(a)/Math.log(n))).toFixed(2);questionArea.innerHTML=`Express \\( \\log_{${a}} ${r} \\) in base \\( ${n} \\)`,correctAnswer={t:e,alternate:`\\frac{\\log_{${n}} ${r}}{\\log_{${n}} ${a}}=${e}`};break}case"equation":{let e=Math.floor(3*Math.random())+2;questionArea.innerHTML=`Solve for \\( x \\): \\( ${a}^{x}=${Math.pow(a,e)} \\)`,correctAnswer={t:e,alternate:`x=${e}`};break}case"properties":{let e=Math.floor(8*Math.random())+2,t=Math.floor(8*Math.random())+2,r=(Math.log(e*t)/Math.log(a)).toFixed(2),n=(Math.log(e)/Math.log(a)).toFixed(2),c=(Math.log(t)/Math.log(a)).toFixed(2);questionArea.innerHTML=`Evaluate: \\( \\log_{${a}} (${e} \\times ${t}) \\)`,correctAnswer={t:r,alternate:`\\log_{${a}} ${e}+\\log_{${a}} ${t}=${n}+${c}=${r}`};break}case"exponential_form":{let e=Math.floor(3*Math.random())+2,t=Math.pow(a,e);questionArea.innerHTML=`If \\( \\log_{${a}} x=${e} \\), find \\( x \\)`,correctAnswer={t:t,alternate:`${a}^{${e}}=${t}`};break}}MathJax&&MathJax.typeset()}function generateExponent(){questionArea.innerHTML="";let e=["basic","solve","laws","growth","compare"],t=e[Math.floor(Math.random()*e.length)],a=Math.floor(4*Math.random())+2,r=Math.floor(5*Math.random())+2;switch(t){case"basic":questionArea.innerHTML=`Evaluate: \\( ${a}^{${r}} \\)`,correctAnswer={t:Math.pow(a,r),alternate:Math.pow(a,r)};break;case"solve":let e=Math.pow(a,r);questionArea.innerHTML=`Solve for \\( x \\): \\( ${a}^{x}=${e} \\)`,correctAnswer={t:r,alternate:r};break;case"laws":let t=Math.floor(3*Math.random())+2,n=Math.floor(3*Math.random())+2;questionArea.innerHTML=`Simplify: \\( (${a}^{${t}}) \\times (${a}^{${n}}) \\)`,correctAnswer={t:`${a}<sup>${t+n}</sup>`,alternate:Math.pow(a,t+n)};break;case"growth":let c=(20*Math.random()+5).toFixed(1);questionArea.innerHTML=`A population grows at \\( ${c}\\% \\) annually. What is the growth factor?`;let s=(1+c/100).toFixed(3);correctAnswer={t:s,alternate:"1+"+c/100};break;case"compare":let o=Math.floor(3*Math.random())+2,i=Math.floor(3*Math.random())+2,l=Math.floor(4*Math.random())+2,h=Math.floor(4*Math.random())+2;questionArea.innerHTML=`Which is larger: \\( ${o}^{${l}} \\) or \\( ${i}^{${h}} \\)?`;let $=[Math.pow(o,l),Math.pow(i,h)];correctAnswer={t:$[0]>$[1]?`${o}^${l}`:`${i}^${h}`,alternate:Math.max(...$)}}MathJax&&MathJax.typeset()}function generateFactorial(){questionArea.innerHTML="";let e=["basic","division","equation","approximation","prime"],t=e[Math.floor(Math.random()*e.length)],a=Math.floor(7*Math.random())+5,r=Math.floor(Math.random()*(a-2))+2;switch(t){case"basic":questionArea.innerHTML=`Calculate \\( ${a}! \\)`,correctAnswer={t:Array.from({length:a},((e,t)=>t+1)).reduce(((e,t)=>e*t),1),alternate:Array.from({length:a},((e,t)=>t+1)).reduce(((e,t)=>e*t),1)};break;case"division":questionArea.innerHTML=`Simplify: \\( \\frac{${a}!}{${r}!} \\)`,correctAnswer={t:Array.from({length:a-r},((e,t)=>a-t)).reduce(((e,t)=>e*t),1),alternate:Array.from({length:a},((e,t)=>t+1)).reduce(((e,t)=>e*t),1)/Array.from({length:r},((e,t)=>t+1)).reduce(((e,t)=>e*t),1)};break;case"equation":let e=Array.from({length:a},((e,t)=>t+1)).reduce(((e,t)=>e*t),1);questionArea.innerHTML=`Solve for \\( n \\): \\( n!=${e} \\)`,correctAnswer={t:a,alternate:a};break;case"approximation":questionArea.innerHTML=`Estimate \\( ${a}! \\) using Stirling's approximation`;let t=Math.sqrt(2*Math.PI*a)*Math.pow(a/Math.E,a);correctAnswer={t:t.toFixed(0),alternate:Math.round(t)};break;case"prime":let n=[2,3,5,7,11][Math.floor(5*Math.random())];questionArea.innerHTML=`Find the exponent of \\( ${n} \\) in \\( ${a}! \\) (prime factorization)`;let c=0,s=a;for(;s>0;)s=Math.floor(s/n),c+=s;correctAnswer={t:c,alternate:c}}MathJax&&MathJax.typeset()}function factorial(e){if(e<0)return NaN;let t=1;for(let a=2;a<=e;a++)t*=a;return t}function nPr(e,t){return t>e?0:factorial(e)/factorial(e-t)}function nCr(e,t){return t>e?0:factorial(e)/(factorial(t)*factorial(e-t))}function generatePermutation(){questionArea.innerHTML="";let e=["basic","equation","word","circular","identical","withReplacement"],t=e[Math.floor(Math.random()*e.length)],a=Math.floor(8*Math.random())+5,r=Math.floor(Math.random()*(a-1))+1;switch(t){case"basic":questionArea.innerHTML=`\\( P(${a}, ${r}) \\)`,correctAnswer={t:nPr(a,r),alternate:`nPr(${a},${r})`};break;case"equation":let e=nPr(a,r);questionArea.innerHTML=`Find \\( n \\) if \\( P(n, ${r})=${e} \\)`,correctAnswer={t:a,alternate:`${a}`};break;case"word":let t=["books","cars","students","colors"],n=t[Math.floor(Math.random()*t.length)];questionArea.innerHTML=`In how many ways can you arrange \\( ${r} \\) ${n} chosen from \\( ${a} \\)?`,correctAnswer={t:nPr(a,r),alternate:`P(${a},${r})`};break;case"circular":questionArea.innerHTML=`How many circular arrangements of \\( ${a} \\) distinct objects?`,correctAnswer={t:factorial(a-1),alternate:`(${a}-1)!`};break;case"identical":let c=Math.floor(Math.random()*(a-1))+1;questionArea.innerHTML=`Permutations of \\( ${a} \\) items when \\( ${c} \\) are identical`,correctAnswer={t:factorial(a)/factorial(c),alternate:`${a}!/${c}!`};break;case"withReplacement":questionArea.innerHTML=`How many ordered selections of \\( ${r} \\) items from \\( ${a} \\) types if repetition is allowed?`,correctAnswer={t:Math.pow(a,r),alternate:`${a}^${r}`}}MathJax&&MathJax.typeset()}function generateCombination(){questionArea.innerHTML="";let e=["basic","equation","word","complement","paths","multiset"],t=e[Math.floor(Math.random()*e.length)],a=Math.floor(8*Math.random())+5,r=Math.floor(Math.random()*(a-1))+1;switch(t){case"basic":questionArea.innerHTML=`\\( C(${a}, ${r}) \\)`,correctAnswer={t:nCr(a,r),alternate:`nCr(${a},${r})`};break;case"equation":let e=nCr(a,r);questionArea.innerHTML=`Find \\( n \\) if \\( C(n, ${r})=${e} \\)`,correctAnswer={t:a,alternate:`${a}`};break;case"word":let t=["fruits","committee members","pizzas"],n=t[Math.floor(Math.random()*t.length)];questionArea.innerHTML=`How many ways to choose \\( ${r} \\) ${n} from \\( ${a} \\)?`,correctAnswer={t:nCr(a,r),alternate:`C(${a},${r})`};break;case"complement":questionArea.innerHTML=`Show that \\( C(${a}, ${a-r})=C(${a}, ${r}) \\). What is its value?`,correctAnswer={t:nCr(a,r),alternate:`C(${a},${r})`};break;case"paths":let c=Math.floor(4*Math.random())+3;questionArea.innerHTML=`Number of shortest paths in a \\( ${c} \\times ${c} \\) grid (right & up moves)?`,correctAnswer={t:nCr(2*c,c),alternate:`C(${2*c},${c})`};break;case"multiset":questionArea.innerHTML=`Ways to choose \\( ${r} \\) items from \\( ${a} \\) types if repeats allowed?`,correctAnswer={t:nCr(a+r-1,r),alternate:`C(${a+r-1},${r})`}}MathJax&&MathJax.typeset()}function generateMatrix(){questionArea.innerHTML="";let e=["add","subtract","multiply","inverse","system","transpose","scalar_mult","power","row_echelon"],t=()=>({a:+(10*Math.random()-5).toFixed(2),b:+(10*Math.random()-5).toFixed(2),c:+(10*Math.random()-5).toFixed(2),d:+(10*Math.random()-5).toFixed(2)}),a=(e,t="bmatrix")=>`\\begin{${t}} ${e.a} & ${e.b} \\\\ ${e.c} & ${e.d} \\end{${t}}`;switch(e[Math.floor(Math.random()*e.length)]){case"add":{let e=t(),r=t(),n={a:+(e.a+r.a).toFixed(2),b:+(e.b+r.b).toFixed(2),c:+(e.c+r.c).toFixed(2),d:+(e.d+r.d).toFixed(2)};questionArea.innerHTML=`Add: $${a(e)}+${a(r)}$`,correctAnswer={t:`[${n.a},${n.b},${n.c},${n.d}]`,alternate:a(n)};break}case"subtract":{let e=t(),r=t(),n={a:+(e.a-r.a).toFixed(2),b:+(e.b-r.b).toFixed(2),c:+(e.c-r.c).toFixed(2),d:+(e.d-r.d).toFixed(2)};questionArea.innerHTML=`Subtract: $${a(e)}-${a(r)}$`,correctAnswer={t:`(${n.a},${n.b},${n.c},${n.d})`,alternate:a(n)};break}case"multiply":{let e=t(),r=t(),n={a:+(e.a*r.a+e.b*r.c).toFixed(2),b:+(e.a*r.b+e.b*r.d).toFixed(2),c:+(e.c*r.a+e.d*r.c).toFixed(2),d:+(e.c*r.b+e.d*r.d).toFixed(2)};questionArea.innerHTML=`Multiply: $${a(e)} \\times ${a(r)}$`,correctAnswer={t:`[${n.a},${n.b},${n.c},${n.d}]`,alternate:a(n)};break}case"inverse":{let e,r;do{e=t(),r=e.a*e.d-e.b*e.c}while(Math.abs(r)<.1);let n=1/r,c={a:+(e.d*n).toFixed(2),b:+(-e.b*n).toFixed(2),c:+(-e.c*n).toFixed(2),d:+(e.a*n).toFixed(2)};questionArea.innerHTML=`Find inverse of $${a(e)}$`,correctAnswer={t:`inv(${c.a},${c.b},${c.c},${c.d})`,alternate:a(c)};break}case"system":{let e=t(),a=+(5*Math.random()+1).toFixed(2),r=+(5*Math.random()+1).toFixed(2),n={a:+(e.a*a+e.b*r).toFixed(2),b:+(e.c*a+e.d*r).toFixed(2)};questionArea.innerHTML=`Solve:<br>\n                $${e.a}x+${e.b}y=${n.a}$<br>\n                $${e.c}x+${e.d}y=${n.b}$`,correctAnswer={t:`x=${a}, y=${r}`,alternate:`(${a},${r})`};break}case"transpose":{let e=t(),r={a:e.a,b:e.c,c:e.b,d:e.d};questionArea.innerHTML=`Find transpose of $${a(e)}$`,correctAnswer={t:`tr(${r.a},${r.b},${r.c},${r.d})`,alternate:a(r)};break}case"scalar_mult":{let e=t(),r=+(10*Math.random()-5).toFixed(1),n={a:+(r*e.a).toFixed(2),b:+(r*e.b).toFixed(2),c:+(r*e.c).toFixed(2),d:+(r*e.d).toFixed(2)};questionArea.innerHTML=`Multiply $${a(e)}$ by ${r}`,correctAnswer={t:`scl(${n.a},${n.b},${n.c},${n.d})`,alternate:a(n)};break}case"power":{let e=t(),r={a:+(e.a*e.a+e.b*e.c).toFixed(2),b:+(e.a*e.b+e.b*e.d).toFixed(2),c:+(e.c*e.a+e.d*e.c).toFixed(2),d:+(e.c*e.b+e.d*e.d).toFixed(2)};questionArea.innerHTML=`Compute $${a(e)}^2$`,correctAnswer={t:`pow(${r.a},${r.b},${r.c},${r.d})`,alternate:a(r)};break}case"row_echelon":{let e;do{e=t()}while(Math.abs(e.a)<.1);let r=+(e.c/e.a).toFixed(2),n={a:e.a,b:e.b,c:0,d:+(e.d-r*e.b).toFixed(2)};questionArea.innerHTML=`Find row-echelon form of $${a(e)}$`,correctAnswer={t:`ref(${n.a},${n.b},${n.c},${n.d})`,alternate:a(n)};break}}MathJax.typeset()}function generateSin(){questionArea.innerHTML="";let e=["evaluate","solve","amplitude","period","phase_shift","law_sines","unit_circle","identity"];switch(e[Math.floor(Math.random()*e.length)]){case"evaluate":if(Math.random()<.5){let e=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330],t=e[Math.floor(Math.random()*e.length)],a=Math.sin(t*Math.PI/180).toFixed(2);questionArea.innerHTML=`Evaluate $\\sin(${t}^\\circ)$`,correctAnswer={t:a,alternate:a}}else{let e=[{value:0,label:"0"},{value:Math.PI/6,label:"\\frac{\\pi}{6}"},{value:Math.PI/4,label:"\\frac{\\pi}{4}"},{value:Math.PI/3,label:"\\frac{\\pi}{3}"},{value:Math.PI/2,label:"\\frac{\\pi}{2}"},{value:2*Math.PI/3,label:"\\frac{2\\pi}{3}"},{value:3*Math.PI/4,label:"\\frac{3\\pi}{4}"},{value:5*Math.PI/6,label:"\\frac{5\\pi}{6}"},{value:Math.PI,label:"\\pi"},{value:7*Math.PI/6,label:"\\frac{7\\pi}{6}"},{value:5*Math.PI/4,label:"\\frac{5\\pi}{4}"},{value:4*Math.PI/3,label:"\\frac{4\\pi}{3}"},{value:3*Math.PI/2,label:"\\frac{3\\pi}{2}"},{value:5*Math.PI/3,label:"\\frac{5\\pi}{3}"},{value:7*Math.PI/4,label:"\\frac{7\\pi}{4}"},{value:11*Math.PI/6,label:"\\frac{11\\pi}{6}"}],t=e[Math.floor(Math.random()*e.length)],a=Math.sin(t.value).toFixed(2);questionArea.innerHTML=`Evaluate $\\sin(${t.label})$`,correctAnswer={t:a,alternate:a}}break;case"solve":{let e=(2*Math.random()-1).toFixed(2),t=Math.random()<.5,a=[],r=Math.asin(e);if(t){let t=180*r/Math.PI;[t,180-t].forEach((e=>{e>=0&&e<360&&a.push(`${e.toFixed(0)}deg`)})),questionArea.innerHTML=`Solve $\\sin\\theta=${e}$ (in degrees)`}else{[r,Math.PI-r].forEach((e=>{e>=0&&e<2*Math.PI&&a.push(e.toFixed(2))})),questionArea.innerHTML=`Solve $\\sin\\theta=${e}$ (in radians)`}correctAnswer={t:a.join(", "),alternate:a.join(", ")};break}case"amplitude":{let e=(4*Math.random()+1).toFixed(1);questionArea.innerHTML=`Find the amplitude of $y=${e}\\sin(3x+\\pi/4)$`,correctAnswer={t:e,alternate:e};break}case"period":{let e=Math.floor(4*Math.random()+1);questionArea.innerHTML=`What is the period of $y=\\sin(${e}x)$?`,correctAnswer={t:(2*Math.PI/e).toFixed(2)+" radians",alternate:`\\frac{2\\pi}{${e}}`};break}case"phase_shift":{let e=(Math.random()*Math.PI).toFixed(2),t=parseFloat(e)>0?"left":"right",a=0==parseFloat(e)?"0":`${e} units ${t}`;questionArea.innerHTML=`Identify the phase shift of $y=\\sin(x+${e})$`,correctAnswer={t:a,alternate:0==parseFloat(e)?"0":`-${e}`};break}case"law_sines":{let e=Math.floor(50*Math.random()+30),t=Math.floor(50*Math.random()+30),a=Math.floor(10*Math.random()+5),r=(a*Math.sin(t*Math.PI/180)/Math.sin(e*Math.PI/180)).toFixed(1);questionArea.innerHTML=`Using the Law of Sines:<br>\n                In triangle ABC, ∠A=${e}deg, ∠B=${t}deg, and side a=${a}.<br>\n                Find side b.`,correctAnswer={t:r,alternate:r};break}case"unit_circle":{let e=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330],t=e[Math.floor(Math.random()*e.length)],a=Math.cos(t*Math.PI/180).toFixed(2),r=Math.sin(t*Math.PI/180).toFixed(2);questionArea.innerHTML=`Find the coordinates on the unit circle for an angle of ${t}deg (format: (cos, sin))`,correctAnswer={t:`(${a}, ${r})`,alternate:`(${a}, ${r})`};break}case"identity":questionArea.innerHTML="Complete the identity: $\\sin^2\\theta+\\cos^2\\theta=\\; ?$",correctAnswer={t:"1",alternate:"one"};break;default:questionArea.innerHTML="Unknown sine question type"}MathJax.typeset()}function generateCosine(){questionArea.innerHTML="";let e=["evaluate","solve","amplitude","period","phase_shift","law_cosines","identity"];switch(e[Math.floor(Math.random()*e.length)]){case"evaluate":if(Math.random()<.5){let e=[0,60,90,120,180,240,270,300],t=e[Math.floor(Math.random()*e.length)],a=Math.cos(t*Math.PI/180).toFixed(2);questionArea.innerHTML=`Evaluate $\\cos(${t}^\\circ)$`,correctAnswer={t:a,alternate:a}}else{let e=[{value:0,label:"0"},{value:Math.PI/3,label:"\\frac{\\pi}{3}"},{value:Math.PI/2,label:"\\frac{\\pi}{2}"},{value:2*Math.PI/3,label:"\\frac{2\\pi}{3}"},{value:Math.PI,label:"\\pi"},{value:4*Math.PI/3,label:"\\frac{4\\pi}{3}"},{value:3*Math.PI/2,label:"\\frac{3\\pi}{2}"},{value:5*Math.PI/3,label:"\\frac{5\\pi}{3}"}],t=e[Math.floor(Math.random()*e.length)],a=Math.cos(t.value).toFixed(2);questionArea.innerHTML=`Evaluate $\\cos(${t.label})$`,correctAnswer={t:a,alternate:a}}break;case"solve":{let e=(2*Math.random()-1).toFixed(2),t=Math.random()<.5,a=[],r=Math.acos(e);if(t){let t=180*r/Math.PI;[t,360-t].forEach((e=>{e>=0&&e<360&&a.push(`${e.toFixed(0)}deg`)})),questionArea.innerHTML=`Solve $\\cos\\theta=${e}$ (in degrees)`}else{[r,2*Math.PI-r].forEach((e=>{e>=0&&e<2*Math.PI&&a.push(e.toFixed(2))})),questionArea.innerHTML=`Solve $\\cos\\theta=${e}$ (in radians)`}correctAnswer={t:a.join(", "),alternate:a.join(", ")};break}case"amplitude":{let e=(4*Math.random()+1).toFixed(1);questionArea.innerHTML=`Find the amplitude of $y=${e}\\cos(2x-\\pi/3)$`,correctAnswer={t:e,alternate:e};break}case"period":{let e=Math.floor(4*Math.random()+1);questionArea.innerHTML=`What is the period of $y=\\cos(${e}x)$?`,correctAnswer={t:(2*Math.PI/e).toFixed(2)+" radians",alternate:`\\frac{2\\pi}{${e}}`};break}case"phase_shift":{let e=(Math.random()*Math.PI).toFixed(2),t=parseFloat(e)>0?"left":"right",a=0==parseFloat(e)?"0":`${e} units ${t}`;questionArea.innerHTML=`Identify the phase shift of $y=\\cos(x+${e})$`,correctAnswer={t:a,alternate:0==parseFloat(e)?"0":`-${e}`};break}case"law_cosines":{let e=Math.floor(10*Math.random()+5),t=Math.floor(10*Math.random()+5),a=Math.floor(50*Math.random()+30),r=Math.sqrt(e*e+t*t-2*e*t*Math.cos(a*Math.PI/180)).toFixed(1);questionArea.innerHTML=`Using the Law of Cosines:<br>\n                In triangle ABC, sides a=${e}, b=${t}, and ∠C=${a}deg.<br>\n                Find side c.`,correctAnswer={t:r,alternate:r};break}case"identity":questionArea.innerHTML="Complete the identity: $\\cos^2\\theta+\\sin^2\\theta=\\; ?$",correctAnswer={t:"1",alternate:"one"};break;default:questionArea.innerHTML="Unknown cosine question type"}MathJax.typeset()}function generateTangent(){questionArea.innerHTML="";let e=["evaluate","solve","period","asymptote","identity"];switch(e[Math.floor(Math.random()*e.length)]){case"evaluate":{let e=[0,45,135,225,315],t=e[Math.floor(Math.random()*e.length)],a=Math.tan(t*Math.PI/180).toFixed(2);questionArea.innerHTML=`Evaluate $\\tan(${t}^\\circ)$`,correctAnswer={t:a,alternate:a};break}case"solve":{let e=(10*Math.random()-5).toFixed(2),t=Math.random()<.5,a=Math.atan(e);if(t){let t=180*a/Math.PI;questionArea.innerHTML=`Solve $\\tan\\theta=${e}$ (in degrees, give the principal solution)`,correctAnswer={t:`${t.toFixed(0)}deg+180degn`,alternate:`${t.toFixed(0)}deg+180degn`}}else questionArea.innerHTML=`Solve $\\tan\\theta=${e}$ (in radians, give the principal solution)`,correctAnswer={t:`${a.toFixed(2)}+\\pi n`,alternate:`${a.toFixed(2)}+\\pi n`};break}case"period":{let e=Math.floor(3*Math.random()+1);questionArea.innerHTML=`What is the period of $y=\\tan(${e}x)$?`,correctAnswer={t:(Math.PI/e).toFixed(2)+" radians",alternate:`\\frac{\\pi}{${e}}`};break}case"asymptote":{let e=Math.floor(2*Math.random()+1),t=[];for(let a=-1;a<=0;a++)t.push(`x=\\frac{(2*${a}+1)\\pi}{2\\cdot${e}}`);questionArea.innerHTML=`Find the vertical asymptotes of $y=\\tan(${e}x)$`,correctAnswer={t:t.join(", "),alternate:`x=\\frac{\\pi}{2\\cdot${e}}+\\frac{\\pi k}{${e}}`};break}case"identity":questionArea.innerHTML="Complete the identity: $1+\\tan^2\\theta=\\; ?$",correctAnswer={t:"sec^2theta",alternate:"\\sec^2\\theta"};break;default:questionArea.innerHTML="Unknown tangent question type"}MathJax.typeset()}function generateCosecant(){questionArea.innerHTML="";let e=["evaluate","relationship","asymptote"];switch(e[Math.floor(Math.random()*e.length)]){case"evaluate":{let e=[30,150,210,330],t=e[Math.floor(Math.random()*e.length)],a=(1/Math.sin(t*Math.PI/180)).toFixed(2);questionArea.innerHTML=`Evaluate $\\csc(${t}^\\circ)$`,correctAnswer={t:a,alternate:a};break}case"relationship":{let e=Math.floor(360*Math.random());questionArea.innerHTML=`Express $\\csc(${e}^\\circ)$ in terms of sine.`,correctAnswer={t:`\\frac{1}{\\sin(${e}^\\circ)}`,alternate:"1/sin("+e+"deg)"};break}case"asymptote":questionArea.innerHTML="Find the vertical asymptotes of $y=\\csc(x)$ (in radians).",correctAnswer={t:"x=n\\pi",alternate:"nπ"};break;default:questionArea.innerHTML="Unknown cosecant question type"}MathJax.typeset()}function generateSecant(){switch(questionArea.innerHTML="",Math.random()<.5?"evaluate":"identity"){case"evaluate":{let e=[0,60,180,300],t=e[Math.floor(Math.random()*e.length)],a=(1/Math.cos(t*Math.PI/180)).toFixed(2);questionArea.innerHTML=`Evaluate $\\sec(${t}^\\circ)$`,correctAnswer={t:a,alternate:a};break}case"identity":questionArea.innerHTML="Complete the identity: $\\sec^2\\theta-\\tan^2\\theta=?$",correctAnswer={t:"1",alternate:"one"};break;default:questionArea.innerHTML="Unknown secant question type"}MathJax.typeset()}function generateCotangent(){switch(questionArea.innerHTML="",Math.random()<.5?"evaluate":"relationship"){case"evaluate":{let e=[45,135,225,315],t=e[Math.floor(Math.random()*e.length)],a=(1/Math.tan(t*Math.PI/180)).toFixed(2);questionArea.innerHTML=`Evaluate $\\cot(${t}^\\circ)$`,correctAnswer={t:a,alternate:a};break}case"relationship":questionArea.innerHTML="Express $\\cot\\theta$ in terms of tangent.",correctAnswer={t:"\\frac{1}{\\tan\\theta}",alternate:"1/tantheta"};break;default:questionArea.innerHTML="Unknown cotangent question type"}MathJax.typeset()}function generateProbability(){questionArea.innerHTML="";let e,t=["basic","conditional","independent","mutually_exclusive","bayes","binomial","expected_value","complement","permutation_combination","geometric"],a=[];switch(t[Math.floor(Math.random()*t.length)]){case"basic":{let t=Math.floor(50*Math.random())+10,r=Math.floor(Math.random()*(t-1))+1,n=(r/t).toFixed(2);a.push(`A bag contains <span class="math">\\(${t}\\)</span> marbles, <span class="math">\\(${r}\\)</span> of which are red. What is the probability of drawing a red marble?`),e=n,correctAnswer={t:n,alternate:`${r}/${t}`};break}case"conditional":{let t=Math.floor(100*Math.random())+50,r=Math.floor(Math.random()*(t-10))+10,n=Math.floor(Math.random()*(r-5))+5,c=(n/r).toFixed(2);a.push(`Given <span class="math">\\(${t}\\)</span> items, <span class="math">\\(${r}\\)</span> are type A, and <span class="math">\\(${n}\\)</span> of those are also type B. Find the probability of type B given type A.`),e=c,correctAnswer={t:c,alternate:`${n}/${r}`};break}case"independent":{let t=(.8*Math.random()+.1).toFixed(2),r=(.8*Math.random()+.1).toFixed(2),n=(t*r).toFixed(2);a.push(`The probability of event A is <span class="math">\\(${t}\\)</span>, and event B is <span class="math">\\(${r}\\)</span>. If A and B are independent, find the probability of both occurring.`),e=n,correctAnswer={t:n,alternate:`${t} \\times ${r}`};break}case"mutually_exclusive":{let t=(.5*Math.random()+.2).toFixed(2),r=(Math.random()*(.9-t)+.1).toFixed(2),n=(parseFloat(t)+parseFloat(r)).toFixed(2);a.push(`Events A and B are mutually exclusive with <span class="math">\\(P(A)=${t}\\)</span> and <span class="math">\\(P(B)=${r}\\)</span>. Find the probability of A or B occurring.`),e=n,correctAnswer={t:n,alternate:`${t}+${r}`};break}case"bayes":{let t=(.5*Math.random()+.2).toFixed(2),r=(.5*Math.random()+.2).toFixed(2),n=(.8*Math.random()+.1).toFixed(2),c=(n*t/r).toFixed(2);a.push(`Given <span class="math">\\(P(A)=${t}\\)</span>, <span class="math">\\(P(B)=${r}\\)</span>, and <span class="math">\\(P(B|A)=${n}\\)</span>, find <span class="math">\\(P(A|B)\\)</span>.`),e=c,correctAnswer={t:c,alternate:`\\frac{${n} \\cdot ${t}}{${r}}`};break}case"binomial":{let t=Math.floor(5*Math.random())+5,r=Math.floor(Math.random()*(t-1))+1,n=(.7*Math.random()+.1).toFixed(2),c=(1-n).toFixed(2),s=(nCr(t,r)*Math.pow(n,r)*Math.pow(c,t-r)).toFixed(2);a.push(`A trial has a success probability of <span class="math">\\(${n}\\)</span>. In <span class="math">\\(${t}\\)</span> trials, find the probability of exactly <span class="math">\\(${r}\\)</span> successes.`),e=s,correctAnswer={t:s,alternate:`C(${t},${r}) \\cdot ${n}^{${r}} \\cdot ${c}^{${t-r}}`};break}case"expected_value":{let t=Array.from({length:3},(()=>Math.floor(10*Math.random())+1)),r=Array.from({length:3},(()=>(.3*Math.random()+.1).toFixed(2))),n=parseFloat(r[0])+parseFloat(r[1])+parseFloat(r[2]);r=r.map((e=>(parseFloat(e)/n).toFixed(2)));let c=(t[0]*r[0]+t[1]*r[1]+t[2]*r[2]).toFixed(2);a.push(`A random variable takes values <span class="math">\\(${t.join(", ")}\\)</span> with probabilities <span class="math">\\(${r.join(", ")}\\)</span>. Find the expected value.`),e=c,correctAnswer={t:c,alternate:c};break}case"complement":{let t=(.8*Math.random()+.1).toFixed(2),r=(1-t).toFixed(2);a.push(`If <span class="math">\\(P(A)=${t}\\)</span>, find <span class="math">\\(P(\\text{not } A)\\)</span>.`),e=r,correctAnswer={t:r,alternate:`1-${t}`};break}case"permutation_combination":{let t=Math.floor(8*Math.random())+5,r=Math.floor(Math.random()*(t-1))+1,n=Math.random()<.5,c=n?nPr(t,r):nCr(t,r),s=n?"P":"C";a.push(`Calculate <div class="math display">\\[${s}(${t}, ${r})\\]</div>`),e=c.toString(),correctAnswer={t:c,alternate:`${s}(${t},${r})`};break}case"geometric":{let t=(.7*Math.random()+.2).toFixed(2),r=Math.floor(5*Math.random())+1,n=(Math.pow(1-t,r-1)*t).toFixed(2);a.push(`A trial has success probability <span class="math">\\(${t}\\)</span>. Find the probability of the first success on the <span class="math">\\(${r}${getOrdinal(r)}\\)</span> trial.`),e=n,correctAnswer={t:n,alternate:`${t} \\cdot ${1-t}^{${r-1}}`};break}}let r=document.createElement("div");r.innerHTML=a.join("<br>"),questionArea.appendChild(r),MathJax.typesetPromise([r]).then((()=>{correctAnswer.t=e.replace(/\s+/g,"").toLowerCase()}))}function checkAnswer(){let e=userAnswer.value.trim().toLowerCase(),t=!1,a=e=>e.replace(/\s+/g,"").replace(/\^1/g,"").replace(/x(?!\d)/g,"x1").replace(/(\D)1+/g,"$1").trim().toLowerCase(),r=e=>{try{return t=Function('"use strict"; return ('+e.replace(/(sin|cos|tan|log)\(/g,"Math.$1(")+")")(),parseFloat(t).toString()}catch(t){return a(e)}var t},n=questionType.value;if(["arithmetic_sum","geometric_sum","convergence","nth_term"].includes(n))switch(n){case"convergence":let n=e.replace(/[^a-z]/g,""),c=correctAnswer.t.toLowerCase().replace(/[^a-z]/g,"");t="converges"==c?"converge"==n||"converges"==n:"diverges"==c?"diverge"==n||"diverges"==n:n==c;break;case"geometric_sum":let s=parseFloat(e),o=parseFloat(correctAnswer.t);if(isNaN(s)){let n=r(e);t=[correctAnswer.t,correctAnswer.alternate].filter((e=>void 0!==e)).some((e=>r(e)==n||a(e)==n))}else t=Math.abs(s-o)<.01;break;default:let i=parseFloat(e),l=parseFloat(correctAnswer.t);t=!isNaN(i)&&i==l}else if(["deri","mtrx","vctr","root","inte","sin","cos","tan","cosec","sec","cot","log"].includes(n)){let n=r(e);t=[correctAnswer.t,correctAnswer.alternate].filter((e=>void 0!==e)).some((e=>r(e)==n||a(e)==n))}else{let a=parseFloat(e),r=parseFloat(correctAnswer.t);t=!isNaN(a)&&a==r}answerResults.innerHTML=t?`Correct! The answer is <span class="answer">${correctAnswer.t}</span>.`:`Incorrect. The correct answer is <span class="answer">${correctAnswer.t}</span>.`}function generateSeries(){questionArea.innerHTML="";let e,t,a=["arithmetic_sum","geometric_sum","convergence","nth_term"];switch(a[Math.floor(Math.random()*a.length)]){case"arithmetic_sum":{let a=Math.floor(10*Math.random())+1,r=Math.floor(5*Math.random())+1,n=Math.floor(10*Math.random())+5;e=`Find the sum of the first ${n} terms of the arithmetic sequence: \\[ S_n=\\frac{n}{2} [2a_1+(n-1)d] \\] where \\( a_1=${a} \\) and \\( d=${r} \\).`,t=(n/2*(2*a+(n-1)*r)).toString(),correctAnswer={t:t};break}case"geometric_sum":{let a=Math.floor(5*Math.random())+1,r=(Math.random()<.5?-1:1)*(.9*Math.random()+.1),n=r.toFixed(2),c=Math.floor(8*Math.random())+3;e=`Find the sum of the first ${c} terms of the geometric sequence: \\[ S_n=a_1 \\frac{1-r^n}{1-r} \\] where \\( a_1=${a} \\) and \\( r=${n} \\).`,t=(a*(1-Math.pow(r,c))/(1-r)).toFixed(2),correctAnswer={t:t,alternate:`\\frac{${a}(1-${n}^{${c}})}{1-${n}}`};break}case"convergence":{let a=[{M:"\\frac{1}{n^2}",u:"converges"},{M:"\\frac{1}{\\sqrt{n}}",u:"diverges"},{M:"(-1)^n \\frac{1}{n}",u:"converges"}],r=a[Math.floor(Math.random()*a.length)];e=`Determine if the series converges or diverges: \\[ \\sum_{n=1}^{\\infty} ${r.M} \\]`,t=r.u,correctAnswer={t:t,alternate:t};break}case"nth_term":{let a=Math.floor(10*Math.random())+1,r=Math.floor(5*Math.random())+1,n=Math.floor(10*Math.random())+5,c=a+(n-1)*r;e=`Find the ${n}${getOrdinal(n)} term of the arithmetic sequence: \\[ a_n=a_1+(n-1)d \\] where \\( a_1=${a} \\) and \\( d=${r} \\).`,t=c.toString(),correctAnswer={t:t};break}}let r=document.createElement("div");r.innerHTML=e,questionArea.appendChild(r),MathJax.typesetPromise([r])}function generateLimit(){questionArea.innerHTML="";let e,t,a=["polynomial","rational","infinity","trig"];switch(a[Math.floor(Math.random()*a.length)]){case"polynomial":{let a=Math.floor(5*Math.random())+1,r=Math.floor(10*Math.random())-5,n=Math.floor(5*Math.random());e=`\\[ \\lim_{x \\to ${n}} (${a}x^2+${r}) \\]`,t=(a*n*n+r).toString(),correctAnswer={t:t};break}case"rational":{let a=Math.floor(5*Math.random())+1,r=Math.floor(5*Math.random())+1,n=Math.floor(5*Math.random())+1;e=`\\[ \\lim_{x \\to ${n}} \\frac{${a}x+1}{${r}x-1} \\]`,t=((a*n+1)/(r*n-1)).toFixed(2),correctAnswer={t:t,alternate:`\\frac{${a*n+1}}{${r*n-1}}`};break}case"infinity":{let a=Math.floor(3*Math.random())+1;e=`\\[ \\lim_{x \\to \\infty} \\frac{${a}x^2+x}{x^2-1} \\]`,t=a.toString(),correctAnswer={t:t};break}case"trig":e="\\[ \\lim_{x \\to 0} \\frac{\\sin(x)}{x} \\]",t="1",correctAnswer={t:t};break}let r=document.createElement("div");r.innerHTML=e,questionArea.appendChild(r),MathJax.typesetPromise([r])}function generateRelatedRates(){questionArea.innerHTML="";let e,t,a=["ladder","cone"],r="";switch(a[Math.floor(Math.random()*a.length)]){case"ladder":{let a=10,n=6,c=2;r=`A ${a}-ft ladder leans against a wall. The bottom is ${n} ft from the wall, moving away at ${c} ft/s. Find the rate at which the top is sliding down.`,e="\\[ \\frac{dy}{dt}=? \\]",t=(-n/Math.sqrt(a*a-n*n)*c).toFixed(2),correctAnswer={t:t};break}case"cone":{let a=3,n=9,c=.5;Math.PI;r=`A conical tank has radius ${a} ft and height ${n} ft. The radius increases at ${c} ft/s. Find the rate of change of volume.`,e="\\[ \\frac{dV}{dt}=? \\]",t=(Math.PI*a*n*c).toFixed(2),correctAnswer={t:t};break}}let n=document.createElement("div");n.textContent=r,n.classList.add("problem-text"),questionArea.appendChild(n);let c=document.createElement("div");c.innerHTML=e,questionArea.appendChild(c),MathJax.typesetPromise([c])}document.addEventListener("DOMContentLoaded",(()=>{fetch("/quotes_of_the_day.txt").then((e=>{if(!e.ok)throw new Error("Network error");return e.text()})).then((e=>{e.split("\n").map((e=>e.trim())).filter((e=>e.length>0)).forEach((e=>{let t=e.split("-");if(t.length<2)return;let a=t.slice(0,-1).join("-").trim(),r=t.slice(-1)[0].trim();quotesArray.push(a),authorsArray.push(r)}));let t=Math.floor(Math.random()*quotesArray.length);document.getElementById("new-quote").textContent=quotesArray[t],document.getElementById("author").textContent=`- ${authorsArray[t]}`})).catch((e=>console.error("Error:",e)))})),userAnswer.addEventListener("keyup",(function(e){e.shiftKey&&"Enter"==e.key&&(checkAnswer(),userAnswer.value="",userAnswer.focus())})),generateQuestionButton.addEventListener("click",generateQuestion),checkAnswerButton.addEventListener("click",checkAnswer);