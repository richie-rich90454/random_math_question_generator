import{questionArea as a}from"../script.js";export function nPr(a,t){return t>a?0:e(a)/e(a-t)}export function nCr(a,t){return t>a?0:e(a)/(e(t)*e(a-t))}export function generatePermutation(){a.innerHTML="";let t=["basic","equation","word","circular","identical","withReplacement"],r=t[Math.floor(Math.random()*t.length)],n=Math.floor(8*Math.random())+5,o=Math.floor(Math.random()*(n-1))+1;switch(r){case"basic":a.innerHTML=`\\( P(${n}, ${o}) \\)`,correctAnswer={correct:nPr(n,o),alternate:`nPr(${n},${o})`};break;case"equation":let t=nPr(n,o);a.innerHTML=`Find \\( n \\) if \\( P(n, ${o})=${t} \\)`,correctAnswer={correct:n,alternate:`${n}`};break;case"word":let r=["books","cars","students","colors"],s=r[Math.floor(Math.random()*r.length)];a.innerHTML=`In how many ways can you arrange \\( ${o} \\) ${s} chosen from \\( ${n} \\)?`,correctAnswer={correct:nPr(n,o),alternate:`P(${n},${o})`};break;case"circular":a.innerHTML=`How many circular arrangements of \\( ${n} \\) distinct objects?`,correctAnswer={correct:e(n-1),alternate:`(${n}-1)!`};break;case"identical":let c=Math.floor(Math.random()*(n-1))+1;a.innerHTML=`Permutations of \\( ${n} \\) items when \\( ${c} \\) are identical`,correctAnswer={correct:e(n)/e(c),alternate:`${n}!/${c}!`};break;case"withReplacement":a.innerHTML=`How many ordered selections of \\( ${o} \\) items from \\( ${n} \\) types if repetition is allowed?`,correctAnswer={correct:Math.pow(n,o),alternate:`${n}^${o}`}}MathJax&&MathJax.typeset()}export function generateCombination(){a.innerHTML="";let e=["basic","equation","word","complement","paths","multiset"],t=e[Math.floor(Math.random()*e.length)],r=Math.floor(8*Math.random())+5,n=Math.floor(Math.random()*(r-1))+1;switch(t){case"basic":a.innerHTML=`\\( C(${r}, ${n}) \\)`,correctAnswer={correct:nCr(r,n),alternate:`nCr(${r},${n})`};break;case"equation":let e=nCr(r,n);a.innerHTML=`Find \\( n \\) if \\( C(n, ${n})=${e} \\)`,correctAnswer={correct:r,alternate:`${r}`};break;case"word":let t=["fruits","committee members","pizzas"],o=t[Math.floor(Math.random()*t.length)];a.innerHTML=`How many ways to choose \\( ${n} \\) ${o} from \\( ${r} \\)?`,correctAnswer={correct:nCr(r,n),alternate:`C(${r},${n})`};break;case"complement":a.innerHTML=`Show that \\( C(${r}, ${r-n})=C(${r}, ${n}) \\). What is its value?`,correctAnswer={correct:nCr(r,n),alternate:`C(${r},${n})`};break;case"paths":let s=Math.floor(4*Math.random())+3;a.innerHTML=`Number of shortest paths in a \\( ${s} \\times ${s} \\) grid (right & up moves)?`,correctAnswer={correct:nCr(2*s,s),alternate:`C(${2*s},${s})`};break;case"multiset":a.innerHTML=`Ways to choose \\( ${n} \\) items from \\( ${r} \\) types if repeats allowed?`,correctAnswer={correct:nCr(r+n-1,n),alternate:`C(${r+n-1},${n})`}}MathJax&&MathJax.typeset()}export function generateProbability(){a.innerHTML="";let e,t=["basic","conditional","independent","mutually_exclusive","bayes","binomial","expected_value","complement","permutation_combination","geometric"],r=[];switch(t[Math.floor(Math.random()*t.length)]){case"basic":{let a=Math.floor(50*Math.random())+10,t=Math.floor(Math.random()*(a-1))+1,n=(t/a).toFixed(2);r.push(`A bag contains <span class="math">\\(${a}\\)</span> marbles, <span class="math">\\(${t}\\)</span> of which are red. What is the probability of drawing a red marble?`),e=n,correctAnswer={correct:n,alternate:`${t}/${a}`};break}case"conditional":{let a=Math.floor(100*Math.random())+50,t=Math.floor(Math.random()*(a-10))+10,n=Math.floor(Math.random()*(t-5))+5,o=(n/t).toFixed(2);r.push(`Given <span class="math">\\(${a}\\)</span> items, <span class="math">\\(${t}\\)</span> are type A, and <span class="math">\\(${n}\\)</span> of those are also type B. Find the probability of type B given type A.`),e=o,correctAnswer={correct:o,alternate:`${n}/${t}`};break}case"independent":{let a=(.8*Math.random()+.1).toFixed(2),t=(.8*Math.random()+.1).toFixed(2),n=(a*t).toFixed(2);r.push(`The probability of event A is <span class="math">\\(${a}\\)</span>, and event B is <span class="math">\\(${t}\\)</span>. If A and B are independent, find the probability of both occurring.`),e=n,correctAnswer={correct:n,alternate:`${a} \\times ${t}`};break}case"mutually_exclusive":{let a=(.5*Math.random()+.2).toFixed(2),t=(Math.random()*(.9-a)+.1).toFixed(2),n=(parseFloat(a)+parseFloat(t)).toFixed(2);r.push(`Events A and B are mutually exclusive with <span class="math">\\(P(A)=${a}\\)</span> and <span class="math">\\(P(B)=${t}\\)</span>. Find the probability of A or B occurring.`),e=n,correctAnswer={correct:n,alternate:`${a}+${t}`};break}case"bayes":{let a=(.5*Math.random()+.2).toFixed(2),t=(.5*Math.random()+.2).toFixed(2),n=(.8*Math.random()+.1).toFixed(2),o=(n*a/t).toFixed(2);r.push(`Given <span class="math">\\(P(A)=${a}\\)</span>, <span class="math">\\(P(B)=${t}\\)</span>, and <span class="math">\\(P(B|A)=${n}\\)</span>, find <span class="math">\\(P(A|B)\\)</span>.`),e=o,correctAnswer={correct:o,alternate:`\\frac{${n} \\cdot ${a}}{${t}}`};break}case"binomial":{let a=Math.floor(5*Math.random())+5,t=Math.floor(Math.random()*(a-1))+1,n=(.7*Math.random()+.1).toFixed(2),o=(1-n).toFixed(2),s=(nCr(a,t)*Math.pow(n,t)*Math.pow(o,a-t)).toFixed(2);r.push(`A trial has a success probability of <span class="math">\\(${n}\\)</span>. In <span class="math">\\(${a}\\)</span> trials, find the probability of exactly <span class="math">\\(${t}\\)</span> successes.`),e=s,correctAnswer={correct:s,alternate:`C(${a},${t}) \\cdot ${n}^{${t}} \\cdot ${o}^{${a-t}}`};break}case"expected_value":{let a=Array.from({length:3},(()=>Math.floor(10*Math.random())+1)),t=Array.from({length:3},(()=>(.3*Math.random()+.1).toFixed(2))),n=parseFloat(t[0])+parseFloat(t[1])+parseFloat(t[2]);t=t.map((a=>(parseFloat(a)/n).toFixed(2)));let o=(a[0]*t[0]+a[1]*t[1]+a[2]*t[2]).toFixed(2);r.push(`A random variable takes values <span class="math">\\(${a.join(", ")}\\)</span> with probabilities <span class="math">\\(${t.join(", ")}\\)</span>. Find the expected value.`),e=o,correctAnswer={correct:o,alternate:o};break}case"complement":{let a=(.8*Math.random()+.1).toFixed(2),t=(1-a).toFixed(2);r.push(`If <span class="math">\\(P(A)=${a}\\)</span>, find <span class="math">\\(P(\\text{not } A)\\)</span>.`),e=t,correctAnswer={correct:t,alternate:`1-${a}`};break}case"permutation_combination":{let a=Math.floor(8*Math.random())+5,t=Math.floor(Math.random()*(a-1))+1,n=Math.random()<.5,o=n?nPr(a,t):nCr(a,t),s=n?"P":"C";r.push(`Calculate <div class="math display">\\[${s}(${a}, ${t})\\]</div>`),e=o.toString(),correctAnswer={correct:o,alternate:`${s}(${a},${t})`};break}case"geometric":{let a=(.7*Math.random()+.2).toFixed(2),t=Math.floor(5*Math.random())+1,n=(Math.pow(1-a,t-1)*a).toFixed(2);r.push(`A trial has success probability <span class="math">\\(${a}\\)</span>. Find the probability of the first success on the <span class="math">\\(${t}${function(a){let e=["th","st","nd","rd"],t=a%100;return e[(t-20)%10]||e[t]||e[0]}(t)}\\)</span> trial.`),e=n,correctAnswer={correct:n,alternate:`${a} \\cdot ${1-a}^{${t-1}}`};break}}let n=document.createElement("div");n.innerHTML=r.join("<br>"),a.appendChild(n),MathJax.typesetPromise([n]).then((()=>{correctAnswer.correct=e.replace(/\s+/g,"").toLowerCase()}))}function e(a){if(a<0)return NaN;let e=1;for(let t=2;t<=a;t++)e*=t;return e}