import{questionArea as t}from"../script.js";export function generateDerivative(){t.innerHTML="";let a,e,r,o,n=[{func:"\\sin(x)",deriv:"\\cos(x)",plainDeriv:"cos(x)"},{func:"\\cos(x)",deriv:"-\\sin(x)",plainDeriv:"-sin(x)"},{func:"\\tan(x)",deriv:"\\sec^{2}(x)",plainDeriv:"sec^2(x)"},{func:"\\csc(x)",deriv:"-\\csc(x)\\cot(x)",plainDeriv:"-csc(x)cot(x)"},{func:"\\sec(x)",deriv:"\\sec(x)\\tan(x)",plainDeriv:"sec(x)tan(x)"},{func:"\\cot(x)",deriv:"-\\csc^{2}(x)",plainDeriv:"-csc^2(x)"}],l=[{func:"e^{x}",deriv:"e^{x}",plainDeriv:"e^x"},{func:"2^{x}",deriv:"2^{x}\\ln(2)",plainDeriv:"2^x*ln(2)"}],i=[{func:"\\ln(x)",deriv:"\\frac{1}{x}",plainDeriv:"1/x"},{func:"\\log_{2}(x)",deriv:"\\frac{1}{x\\ln(2)}",plainDeriv:"1/(x*ln(2))"}],c=["polynomial","trigonometric","exponential","logarithmic","product","quotient","chain","implicit","higherOrder","motion"],h=t=>t.replace(/\\/g,"").replace(/{/g,"").replace(/}/g,"").replace(/cdot/g,"*").replace(/frac\(([^)]+)\)\(([^)]+)\)/g,"($1)/($2)").replace(/frac{([^}]+)}{([^}]+)}/g,"($1)/($2)");switch(c[Math.floor(Math.random()*c.length)]){case"polynomial":{let t=Math.floor(4*Math.random())+2,n=new Set;for(;n.size<t;)n.add(Math.floor(11*Math.random()));n=Array.from(n).sort(((t,a)=>a-t));let l=[];for(let t of n){let a=0==t?Math.floor(100*Math.random())+1:1==t?Math.floor(20*Math.random())+1:Math.floor(30*Math.random())+1;l.push(a)}let i=[],c=[];for(let t=0;t<n.length;t++){let a=0==n[t]?`${l[t]}`:1==n[t]?`${l[t]}x`:`${l[t]}x^{${n[t]}}`,e=0==n[t]?`${l[t]}`:1==n[t]?`${l[t]}x`:`${l[t]}x^${n[t]}`;i.push(a),c.push(e)}a=`(${i.join("+")})`;let h=[],$=[];for(let t=0;t<n.length;t++){if(0==n[t])continue;let a=l[t]*n[t],e=n[t]-1,r=0==e?`${a}`:1==e?`${a}x`:`${a}x^{${e}}`,o=0==e?`${a}`:1==e?`${a}x`:`${a}x^${e}`;h.push(r),$.push(o)}e=h.join("+")||"0",r=$.join("+")||"0",o=`\\[ \\frac{d}{dx} ${a}=? \\]`;break}case"trigonometric":{let t=n[Math.floor(Math.random()*n.length)],l=Math.floor(5*Math.random())+1;a=`${l} ${t.func}`,e=`${l} \\cdot ${t.deriv}`,r=`${l}*${t.plainDeriv}`,o=`\\[ \\frac{d}{dx} ${a}=? \\]`;break}case"exponential":{let t=l[Math.floor(Math.random()*l.length)],n=Math.floor(5*Math.random())+1;a=`${n} ${t.func}`,e=`${n} \\cdot ${t.deriv}`,r=`${n}*${t.plainDeriv}`,o=`\\[ \\frac{d}{dx} ${a}=? \\]`;break}case"logarithmic":{let t=i[Math.floor(Math.random()*i.length)];a=t.func,e=t.deriv,r=t.plainDeriv,o=`\\[ \\frac{d}{dx} ${a}=? \\]`;break}case"product":{let t=Math.floor(5*Math.random())+1,l=`${t}x`,i=n[Math.floor(Math.random()*n.length)];a=`(${l}) \\cdot (${i.func})`,e=`${t} \\cdot ${i.func}+(${l}) \\cdot (${i.deriv})`,r=`${t}*${h(i.func)}+(${l})*${i.plainDeriv}`,o=`\\[ \\frac{d}{dx} ${a}=? \\]`;break}case"quotient":{let t=Math.floor(5*Math.random())+1,l=Math.floor(6*Math.random()),i=n[Math.floor(Math.random()*n.length)],c=`${t}x+${l}`;a=`\\frac{${c}}{${i.func}}`,e=`\\frac{${t} \\cdot ${i.func}-(${c}) \\cdot ${i.deriv}}{(${i.func})^{2}}`,r=`(${t}*${h(i.func)}-(${c})*${i.plainDeriv})/(${h(i.func)})^2`,o=`\\[ \\frac{d}{dx} ${a}=? \\]`;break}case"chain":{let t=Math.floor(3*Math.random()),l=Math.floor(3*Math.random())+1,i=Math.floor(3*Math.random()),c=`${l}x+${i}`,h=`${l}x+${i}`;if(0==t){let t=n[Math.floor(2*Math.random())];a=`${t.func.replace("x",c)}`,e=`${t.deriv.replace("x",c)} \\cdot ${l}`,r=`${t.plainDeriv.replace("x",h)}*${l}`}else if(1==t)a=`e^{${c}}`,e=`e^{${c}} \\cdot ${l}`,r=`e^(${h})*${l}`;else{let t=Math.floor(3*Math.random())+2;a=`(${c})^{${t}}`,e=`${t} (${c})^{${t-1}} \\cdot ${l}`,r=`${t}*(${h})^${t-1}*${l}`}o=`\\[ \\frac{d}{dx} ${a}=? \\]`;break}case"implicit":{let t=Math.floor(3*Math.random())+1,n=Math.floor(3*Math.random())+1;a=`${t}x^{2}+${n}y^{2}=1`,e=`-\\frac{${t}x}{${n}y}`,r=`-(${t}x)/(${n}y)`,o=`\\[ \\text{Find } \\frac{dy}{dx} \\text{ given } ${a} \\]`;break}case"higherOrder":{let t=Math.floor(10*Math.random())+1,n=Math.floor(4*Math.random())+2;a=`${t}x^{${n}}`;let l=Math.floor(2*Math.random())+2,i=t,c=n;for(let t=0;t<l;t++)i*=c,c--;e=c<0?"0":0==c?`${i}`:1==c?`${i}x`:`${i}x^{${c}}`,r=c<0?"0":0==c?`${i}`:1==c?`${i}x`:`${i}x^${c}`,o=`\\[ \\frac{d^{${l}}}{dx^{${l}}} ${a}=? \\]`;break}case"motion":{let t=Math.floor(5*Math.random())+1,n=Math.floor(5*Math.random())+1;a=`${t}t^{2}+${n}t`,e=`${2*t}t+${n}`,r=`${2*t}t+${n}`,o=`\\[ \\text{If position } s(t)=${a}, \\text{ find velocity } v(t)=? \\]`;break}}let $=document.createElement("div");$.innerHTML=o,t.appendChild($),MathJax.typesetPromise([$]),correctAnswer={correct:r.replace(/\s+/g,"").toLowerCase()}}export function generateIntegral(){t.innerHTML="";let a,e,r,o,n=["polynomial","trigonometric","exponential","logarithmic","substitution","definite","initialValue","area","motion"];switch(n[Math.floor(Math.random()*n.length)]){case"polynomial":{let t=Math.floor(4*Math.random())+2,n=new Set;for(;n.size<t;)n.add(Math.floor(11*Math.random()));n=Array.from(n).sort(((t,a)=>a-t));let l=[];for(let t of n)l.push(0==t?Math.floor(100*Math.random())+1:1==t?Math.floor(20*Math.random())+1:Math.floor(30*Math.random())+1);let i=[],c=[];for(let t=0;t<n.length;t++){let a=0==n[t]?`${l[t]}`:1==n[t]?`${l[t]}x`:`${l[t]}x^{${n[t]}}`,e=a.replace(/[{}]/g,"");i.push(a),c.push(e)}a=`(${i.join("+")})`;let h=[],$=[];for(let t=0;t<n.length;t++){let a=n[t]+1,e=l[t]/a,r=`${e.toFixed(2)}x^{${a}}`,o=`${e.toFixed(2)}x^${a}`;h.push(r),$.push(o)}h.push("C"),$.push("C"),e=h.join("+"),r=$.join("+"),o=`\\[ \\int ${a} \\,dx=? \\]`;break}case"trigonometric":{let t=[{func:"\\sin(ax)",integral:"-\\frac{1}{a}\\cos(ax)",plain:"-1/a cos(ax)"},{func:"\\cos(ax)",integral:"\\frac{1}{a}\\sin(ax)",plain:"1/a sin(ax)"},{func:"\\sec^{2}(ax)",integral:"\\frac{1}{a}\\tan(ax)",plain:"1/a tan(ax)"}],o=t[Math.floor(Math.random()*t.length)],n=Math.floor(3*Math.random())+1,l=Math.floor(4*Math.random())+1;a=`${l}${o.func.replace("a",n)}`,e=`${l}${o.integral.replace(/a/g,n)}+C`,r=`${(l/n).toFixed(2)}${o.plain.replace("a",n).replace("1/a","1/"+n)}+C`.replace(/(\.00|0+)$/,"");break}case"exponential":{let t=Math.random()<.5?"e":Math.floor(3*Math.random())+2,e=Math.floor(3*Math.random())+1,n=Math.floor(4*Math.random())+1;"e"==t?(a=`${n}e^{${e}x}`,r=`${(n/e).toFixed(2)}e^(${e}x)+C`):(a=`${n}${t}^{x}`,r=`${(n/Math.log(t)).toFixed(2)}${t}^x+C`),o=`\\[ \\int ${a} \\,dx=? \\]`;break}case"logarithmic":{let t=Math.floor(5*Math.random())+1;a=`${t}/x`,r=`${t}ln|x|+C`,o=`\\[ \\int ${a} \\,dx=? \\]`;break}case"substitution":{let t=Math.floor(3*Math.random())+1,e=Math.floor(5*Math.random()),n=Math.floor(3*Math.random())+2,l=Math.floor(4*Math.random())+1;a=`${l}(${t}x+${e})^{${n}}`;let i=n+1;r=`${(l/(t*i)).toFixed(2)}(${t}x+${e})^${i}+C`.replace(/\.00/g,""),o=`\\[ \\int ${a} \\,dx=? \\]`;break}case"definite":{let t=Array.from({length:3},(()=>Math.floor(4*Math.random()))),e=t.map((()=>Math.floor(5*Math.random())+1)),[n,l]=[1,Math.floor(5*Math.random())+2];a=e.map(((a,e)=>`${a}x^${t[e]}`)).join("+");let i=e.map(((a,e)=>a/(t[e]+1))).reduce(((t,a)=>t+a),0);r=((l**(t[0]+1)-n**(t[0]+1))*i).toFixed(2),o=`\\[ \\int_{${n}}^{${l}} ${a} \\,dx=? \\]`;break}case"initialValue":{let t=Math.floor(5*Math.random())+1,e=Math.floor(3*Math.random())+1,n=Math.floor(3*Math.random())+1,l=Math.floor(20*Math.random())+5;a=`${t}x^${e}`;let i=l-t/(e+1)*n**(e+1);r=`${(t/(e+1)).toFixed(2)}x^${e+1}+${i.toFixed(2)}`,o=`\\[ \\text{Find } f(x) \\text{ where } f'(${n})=${l} \\text{ and } f'(x)=${a} \\]`;break}case"area":{let t=["x^2","sin(x)","sqrt(x)","2^x"],a=t[Math.floor(Math.random()*t.length)],[e,n]=[0,Math.floor(4*Math.random())+1];r=`âˆ«${e}^${n} ${a} dx`,o=`\\[ \\text{Set up the integral for the area under } ${a} \\text{ from } ${e} \\text{ to } ${n} \\]`;break}case"motion":{let t=Math.floor(4*Math.random())+1,e=Math.random()<.5?"velocity":"acceleration";"velocity"==e?(a=`${t}t^2`,r=`${(t/3).toFixed(2)}t^3+C`):(a=`${t}t`,r=`${(t/2).toFixed(2)}t^2+C`),o=`\\[ \\text{Find position export function from } ${e} \\ a(t)=${a} \\]`;break}}let l=document.createElement("div");l.innerHTML=o||`\\[ \\int ${a} \\,dx=? \\]`,t.appendChild(l),MathJax.typesetPromise([l]),correctAnswer={correct:r.replace(/\s+/g,"").replace(/\^{/g,"^").replace(/}/g,"").replace(/{/g,"").toLowerCase()}}export function generateLimit(){t.innerHTML="";let a,e,r=["polynomial","rational","infinity","trig"];switch(r[Math.floor(Math.random()*r.length)]){case"polynomial":{let t=Math.floor(5*Math.random())+1,r=Math.floor(10*Math.random())-5,o=Math.floor(5*Math.random());a=`\\[ \\lim_{x \\to ${o}} (${t}x^2+${r}) \\]`,e=(t*o*o+r).toString(),correctAnswer={correct:e};break}case"rational":{let t=Math.floor(5*Math.random())+1,r=Math.floor(5*Math.random())+1,o=Math.floor(5*Math.random())+1;a=`\\[ \\lim_{x \\to ${o}} \\frac{${t}x+1}{${r}x-1} \\]`,e=((t*o+1)/(r*o-1)).toFixed(2),correctAnswer={correct:e,alternate:`\\frac{${t*o+1}}{${r*o-1}}`};break}case"infinity":{let t=Math.floor(3*Math.random())+1;a=`\\[ \\lim_{x \\to \\infty} \\frac{${t}x^2+x}{x^2-1} \\]`,e=t.toString(),correctAnswer={correct:e};break}case"trig":a="\\[ \\lim_{x \\to 0} \\frac{\\sin(x)}{x} \\]",e="1",correctAnswer={correct:e};break}let o=document.createElement("div");o.innerHTML=a,t.appendChild(o),MathJax.typesetPromise([o])}export function generateRelatedRates(){t.innerHTML="";let a,e,r=["ladder","cone"],o="";switch(r[Math.floor(Math.random()*r.length)]){case"ladder":{let t=10,r=6,n=2;o=`A ${t}-ft ladder leans against a wall. The bottom is ${r} ft from the wall, moving away at ${n} ft/s. Find the rate at which the top is sliding down.`,a="\\[ \\frac{dy}{dt}=? \\]",e=(-r/Math.sqrt(t*t-r*r)*n).toFixed(2),correctAnswer={correct:e};break}case"cone":{let t=3,r=9,n=.5;Math.PI;o=`A conical tank has radius ${t} ft and height ${r} ft. The radius increases at ${n} ft/s. Find the rate of change of volume.`,a="\\[ \\frac{dV}{dt}=? \\]",e=(Math.PI*t*r*n).toFixed(2),correctAnswer={correct:e};break}}let n=document.createElement("div");n.textContent=o,n.classList.add("problem-text"),t.appendChild(n);let l=document.createElement("div");l.innerHTML=a,t.appendChild(l),MathJax.typesetPromise([l])}